<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Tec Ride</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  <style>
    /* Change nav-item color */
    .nav-link {
      color: white;
    }

    .nav-link:hover {
      color: gray;
    }

    /* Change navbar-brand color */
    .navbar-brand {
      color: white;
    }

    .navbar-brand:hover {
      color: gray;
    }

    .navbar-text { 
      color: white;
    }
    

  </style>
  </head>
  <body>
    <!-- Navbar section starts -->
    <nav class="navbar navbar-expand-lg bg-primary">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">Tec Ride</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarText">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="#" id="sigIn_auth_Home" style="display: none;">
                Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#" id="sigIn_auth_ride" style="display: none;">
                New ride</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#" id="sigOut_auth_about" style="display: block;">
                About us</a>
            </li>
          </ul>
          <span class="navbar-text">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link" href="#" data-bs-toggle="modal" data-bs-target="#signinModal" id="sigIn_auth" style="display: block;">
                  SignIn</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#" data-bs-toggle="modal" data-bs-target="#signupModal" id="sigOut_auth" style="display: block;">
                  SignUp</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#" id="logOut">Logout</a>
              </li>
            </ul>
          </span>
        </div>
      </div>
    </nav>
    <!-- Navbar sections ends -->

    <!-- Modal signUp -->
    <div class="modal fade" id="signupModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">SignUp</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <form id="signUp-form">
              <div class=" -group">
                  <input type="email" id="signUp-email" class="form-control" placeholder="example@tecRide.mx" required>
              </div>
              <br>
              <div class="form-group">
                  <input type="password" id="signUp-password" class="form-control" placeholder="password" required>
              </div>
              <br>
              <button type="submit" class="btn btn-primary" data-bs-dismiss="modal">SignUp</button>
            </form>
          </div>
        </div>
      </div>
    </div>
    <!-- Modal signUp ends -->

    <!-- Modal signIn -->
    <div class="modal fade" id="signinModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">SignIn</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <form id="login-form">
              <div class=" -group">
                  <input type="email" id="login-email" class="form-control" placeholder="example@tecRide.mx" required>
              </div>
              <br>
              <div class="form-group">
                  <input type="password" id="login-password" class="form-control" placeholder="password" required>
              </div>
              <br>
              <button type="submit" class="btn btn-primary" data-bs-dismiss="modal">SignIn</button>
            </form>
          </div>
        </div>
      </div>
    </div>
    <!-- Modal signIn ends -->

    <!-- Title section starts -->
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <br></br>
          <h1 class="text-center">Tec Ride</h1>
          <p class="text-center" id="text_1" style="display: block;">
            The new way to travel.
          </p>
          <p class="text-center" id="text_2" style="display: none;">
            Insert the necessary information to add a new ride
          </p>
          <hr/>
        </div>
      </div>
    </div>
    <!-- Title section ends -->

    <!-- Main section card rides starts -->
    <div class="container" id="ride_auth" style="display: none;">
      <div id="ridesRow" class="row">
      </div>
    </div>
    <!-- Main section ends -->

    <!-- Main section about starts -->
    <div class="container" id="about_auth" style="display: block;">
      <h2 class="text-center">Deliverable 2 - System Infrastructure</h2>
      <h3 class="text-center">Tec Community Peer to Peer Ridesharing</h3><br/>
      <h4 class="text-center">CryptoBros Members:</h4><br/>
      <h5 class="text-center">Victor Antonio Godínez Rodríguez</h5>
      <h5 class="text-center">Raúl González Cardona</h5>
      <h5 class="text-center">Mónica Lara Pineda</h5>
      <h5 class="text-center">Omar Alejandro Robledo Rodríguez</h5>
    </div>
    <!-- Main section ends -->

    <!-- Form section starts -->
    <div class="container" id="form_ride" style="display: none;">
      <form method="post" id="form_new_ride">
          <div class="mb-3">
              <label for="inputTime" class="form-label">Start time</label><br/>
              <input type="time" id="inputTime" name="appt" required>
          </div>     
          <div class="mb-3">
              <label for="inputPicture" class="form-label">Picture</label>
              <input type="text" class="form-control" id="inputPicture">
          </div>
          <div class="form-group mb-3">
              <label for="inputPositions">Positions</label>
              <select class="form-control" id="inputPositions">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
              </select>
          </div>
          <div class="mb-3">
              <label for="inputDestination" class="form-label">Destination</label>
              <input type="text" class="form-control" id="inputDestination">
          </div>
          <div class="mb-3">
              <label for="inputCost" class="form-label">Cost</label>
              <input type="number" step="0.01" class="form-control" id="inputCost">
          </div>
          <div class="mb-3">
            <label for="inputDescription" class="form-label">Description</label>
            <input type="text" class="form-control" id="inputDescription">

          </div>
          <button type="submit" class="btn btn-primary">Agregar</button>
      </form>
  </div>

  <!-- Form sections ends -->

    <!-- Card section starts -->
    <div id="rideTemplate" style="display: none;">
      <div class="col-md-3 mb-4">

        <div class="card" style="width: 18rem;">
          <img src="./images/boxer.jpeg" class="card-img-top rounded" alt="...">
          <div class="card-body">
            <h5 class="card-title">User 0</h5>
            <strong>Start time</strong>: <span class="ride-startTime">6/03/2022 20:12:34</span><br/>
            <strong>Positions</strong>: <span class="ride-positions">3</span><br/>
            <strong>Destination</strong>: <span class="ride-destination">La Narvarte</span><br/>
            <strong>Cost</strong>: <span class="ride-cost">0.05</span> ETH<br/>
            <span>Description</span>: <span class="text-muted ride-description">Something important</span><br/><br/>
            <!-- <strong>Timer</strong>: <span class="ride-sec" id="minutes"></span>:<span id="seconds"></span><br/><br/> -->
            <button class="btn btn-success btn-reserve" type="button" data-id="0">Reserve</button>
          </div>
        </div>

      </div>
    </div>
    <!-- Card sections ends -->

    <!-- Second main section -->

    <div class="container" id="card_mongo" style="display: none;">
      <div id="mongoRow" class="row">
      </div>
    </div>

    <!-- Second main sections ends -->

    <!-- Mongoose cards -->
    <div id='mongoTemplate' style="display: none;">
      <div class="col-md-3 mb-4">

        <div class="card" style="width: 18rem;">
          <img src="./images/golden-retriever.jpeg" class="card-img-top" alt="...">
          <div class="card-body">
            <h5 class="title">Title user</h5>
            <strong>Start time</strong>: <span class="startTime">6/03/2022 20:12:34</span><br/>
            <strong>Positions</strong>: <span class="positions">3</span><br/>
            <strong>Destination</strong>: <span class="destination">La Narvarte</span><br/>
            <strong>Cost</strong>: <span class="cost">0.05</span> ETH<br/>
            <span>Description</span>: <span class="text-muted description">Something important</span><br/><br/>

            <a href="#" class="btn btn-primary btn-reserve">Reserve</a>
          </div>
        </div> 

      </div>
    </div>

    <!-- Footer section starts -->
    <footer class="footer">
      <div class="container">
        <span class="text-muted">dApp for Tec students</span>
    </div>

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

    <!-- Old jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/web3.min.js"></script>
    <script src="js/truffle-contract.js"></script>
    <script src="js/app.js"></script>
    <script src="js/main.js" type="module"></script>
    <script type="text/javascript" src="rides.json"></script>

    <!-- Test JSON insertion -->
    <script type="text/javascript">
/*
const form_new_ride = document.querySelector('#form_new_ride');
      form_new_ride.addEventListener('submit', e=>{
        e.preventDefault();
        var time = $("#inputTime").val();
        var picture = $("#inputPicture").val();
        var positions = $("#inputPositions").val();
        var destination = $("#inputDestination").val();
        var cost = $("#inputCost").val();
        var description = $("#inputDescription").val();
        var data = {
          offerStartTime: time,
          offerImage: picture,
          offerPositions: positions,
          offerDestination: destination,
          offerCost: cost,
          offerDescription: description,
          offerSeconds: Math.floor(Math.random() * 900) + 60
        };
        var dataJSON = JSON.stringify(data);
        $.ajax({
          type: "POST",
          url: "http://localhost:4000/tec-ride/add",
          data: dataJSON,
          success: function(data) {
            console.log(data);
          },
          error: function(data) {
            console.log(data);
          },
          dataType: "json",
          contentType: "application/json"
        });
      });
*/

      // Insert data to mongo with form
      $("form").submit(function(event) {
        event.preventDefault();
        var time = $("#inputTime").val();
        var picture = $("#inputPicture").val();
        var positions = $("#inputPositions").val();
        var destination = $("#inputDestination").val();
        var cost = $("#inputCost").val();
        var description = $("#inputDescription").val();
        var data = {
          offerUser: "0xDdfF705fC7d0625119C43c4C996640972112F25e",
          offerStartTime: time,
          offerImage: picture,
          offerPositions: positions,
          offerDestination: destination,
          offerCost: cost,
          offerDescription: description,
          offerSeconds: Math.floor(Math.random() * 900) + 60
        };
        var dataJSON = JSON.stringify(data);
        $.ajax({
          type: "POST",
          url: "http://localhost:4000/tec-ride/add",
          data: dataJSON,
          success: function(data) {
            console.log(data);
          },
          error: function(data) {
            console.log(data);
          },
          dataType: "json",
          contentType: "application/json"
        });
      });
    </script>
    <!-- End of Test JSON insertion -->
  </body>
</html>
